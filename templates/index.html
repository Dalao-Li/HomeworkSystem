<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>上传平台</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>

<body>
<div style="text-align: center;">
    <h2>信1701-3班操作系统小学期七月二日报告上传</h2>
</div>

<div style="text-align: center;">
    <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        文件上传
    </button>

     <button class="btn btn-danger btn-lg" data-toggle="modal" onclick="window.location.href='/info'">
        上传情况
    </button>
</div>


<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">
                    操作系统每日报告上传
                </h4>
            </div>
            <div class="modal-body">
                <form id="upload" action="/upload" enctype='multipart/form-data' method='POST'>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">姓名</span>
                        </div>
                        <label for="name"></label>
                        <input type="text" class="form-control" id="name" name="name" placeholder="请输入姓名">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">学号</span>
                        </div>
                        <label for="num"></label>
                        <input type="text" class="form-control" id="num" name="num" placeholder="请输入学号">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">班级</span>
                        </div>

                        <select class="form-control" name="classes">
                            <option value="1701_1">信1701-1班</option>
                            <option value="1701_2">信1701-2班</option>
                            <option value="1701_3">信1701-3班</option>
                        </select>

                    </div>

                    <input id='file' class="btn btn-info" name="file" type="file">
                    <div class="modal-footer">
                        <button type="button" onclick="submitXML()" class="btn btn-primary">提交</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>

<script>
    function submitXML() {
        var name = $('#name').val()
        var num = $('#num').val()
        //用户名为2-5个汉字
        var name_reg = /^[\u4e00-\u9fa5]{2,5}$/

        var num_reg = /^\d{8}$/
        if (!name_reg.test(name)) {
            alert("用户名错误!")
            return
        }
        if (!num_reg.test(num)) {
            alert("学号错误!")
            return
        }
        //判断文件是否为空
        var fileInput = $('#file').get(0).files[0];
        console.info(fileInput);
        if (!fileInput) {
            alert("请选择上传文件！")
            return
        }
        //提交
        $('#upload').submit();
    }
</script>
</html>